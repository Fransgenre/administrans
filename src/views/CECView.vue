<script setup>
import StepItem from '@/components/StepItem.vue'
import StepDetails from '@/components/StepDetails.vue'
import { useGlobalStore } from '@/store'

const store = useGlobalStore()

</script>

<template>
  <div class="grid--row">
    <div class="grid--column two-third">
      <section class="width--xnarrow my-2">
        <h1>Changer d'√©tat-civil</h1>
        <p>
          <strong>Le terme √©tat-civil d√©signe ici les informations vous concernant officiellement garanties par l'√©tat.</strong>
          Il s'agit notamment de votre pr√©nom, nom, date et lieu de naissance, filiation. Elles peuvent appara√Ætre dans votre acte de naissance, livret de famille, Carte Nationale d'Identit√©, ou tout autre document similaire produit par l'√©tat.</p>
        <p>
          Dans le cadre d'une transition administrative, on cherche g√©n√©ralement √† faire modifier deux informations :
        </p>
        <ul>
          <li>Le ou les pr√©noms</li>
          <li>La mention de sexe, parfois appel√©e civilit√© ou genre</li>
        </ul>
        <p>Il est possible de changer de pr√©nom(s) sans changer de mention de sexe, et inversement.</p>
      </section>
      <section class="width--xnarrow my-2">
        <h2>Comment faire ?</h2>
        <p>En France, il existe deux mani√®res de proc√©der pour changer d'√©tat-civil.</p>
        <p><strong>Quelle que soit la m√©thode que vous choisissez, le r√©sultat final est le m√™me.</strong> La ou les d√©cisions vont faire modifier votre acte de naissance, et vous permettre d'utiliser votre nouvel √©tat-civil. Certaines personnes pr√©f√®rent la premi√®re m√©thode pour tout faire en une fois, d'autres la seconde pour pouvoir avancer plus rapidement sur leur changement de pr√©nom.</p>
        <div class="message--primary my-2 px-2 py-2">
          <h3>En une fois, au tribunal</h3>
          <p>On fait modifier le(s) pr√©nom(s) en m√™me temps que la mention de sexe, via une requ√™te adress√©e au tribunal administratif.</p>
          <div class="grid--row">
            <div class="grid--column">
              <p><strong>Avantages</strong> :</p>
              <ul>
                <li>Un seul dossier √† constituer</li>
                <li>Plus rapide pour la proc√©dure dans son ensemble</li>
                <li>On peut directement refaire ses papiers d'identit√© finaux une fois la d√©cision rendue</li>
              </ul>
            </div>
            <div class="grid--column">
              <p><strong>Inconv√©nients</strong> :</p>
              <ul>
                <li>Incoh√©rences de traitement selon les tribunaux qui peuvent ralentir la d√©cision</li>
                <li>On attend plus de temps avant de pouvoir utiliser officiellement son ou ses nouveaux pr√©nom(s)</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="message--primary my-2 px-2 py-2">
          <h3>En deux fois, √† la mairie puis au tribunal</h3>
          <p>On fait modifier le(s) pr√©nom(s) en mairie puis, dans un second temps, la mention de sexe au tribunal.</p>
          <div class="grid--row">
            <div class="grid--column">
              <p><strong>Avantages</strong> :</p>
              <ul>
                <li>On peut obtenir une d√©cision plus rapidement pour ses nouveaux pr√©noms, typiquement en quelques semaines √† quelques mois</li>
                <li>La d√©marche en mairie est plus simple qu'au tribunal</li>
              </ul>
            </div>
            <div class="grid--column">
              <p><strong>Inconv√©nients</strong> :</p>
              <ul>
                <li>Deux dossiers √† constituer</li>
                <li>Il y a une p√©riode o√π l'on a un pr√©nom a jour, mais une mention de sexe obsol√®te.</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
      <section class="width--xnarrow my-2">
        <h2>Les √©tapes en d√©tail</h2>
        <p>
          Ici, on vous explique tr√®s pr√©cis√©ment comment constituer votre dossier pour qu'il aie les meilleurs chances de passer.
          Certaines des √©tapes peuvent √™tre men√©es en parall√®le pour gagner du temps.
        </p>
        <p>Commencez par choisir votre parcours :
          <select
            name="method"
            id="method"
            :value="store.CecMethod"
            @input="store.setCecMethod($event.target.value)">
            <option value="tribunal">Tribunal uniquement</option>
            <option value="mairieEtTribunal">Mairie puis tribunal</option>
          </select>
        </p> 
        <StepDetails stepId="chooseNames">
          <h3>Choisir vos pr√©noms</h3>
          <p>Il s'agit d'un choix tr√®s personnel, √©videmment, mais voici quelques informations qui pourront vous aider :</p>
          <ul>
            <li>
              Il n'y a th√©oriquement pas de limite au nombre de pr√©noms que vous pouvez choisir,
              m√™me si pour des raisons pratiques, il est possible qu'on vous refuse un nombre trop √©lev√©. Dans la nature, des cas de personnes ayant demand√© et obtenu 7, voire 10 pr√©noms ont √©t√© recens√©s !
            </li>
            <li>Vous √™tes totalement libre sur l'orthographe, et vous pouvez inventer vos propres pr√©noms si vous le souhaitez</li>
          </ul>
        </StepDetails>
        <StepDetails stepId="requestBirthCertificates">
          <h3>Demander des copies int√©grales de votre acte de naissance</h3>
          <p>
            Ces copies vont permettre de justifier de votre identit√© et sont indispensables pour la suite de la proc√©dure.
          </p>
          <p>
            Elles sont √† demander √† votre commune de naissance,
            consultez pour cela
            <a href="https://www.service-public.fr/particuliers/vosdroits/F1427" target="_blank">service-public.fr</a>
            qui vous indiquera pr√©cis√©ment la marche √† suivre.
          </p>
          <p>
            Nous vous recommandons de faire cette demande le plus t√¥t possible,
            dans la mesure o√π elle est gratuite et que certaines communes mettent parfois
            un peu de temps √† vous envoyer les documents. Prenez au moins 3 copies, ce n'est jamais perdu.
          </p>
        </StepDetails>
        <StepDetails stepId="prepareProofs">
          <h3>Rassembler vos justificatifs</h3>
          <p>
            Certains justificatifs sont incontournables pour que votre demande puisse aboutir :
          </p>
          <ul >
            <li>Une copie int√©grale de votre acte de naissance</li>
            <li>Une photocopie recto-verso de votre carte d'identit√© ou passeport</li>
            <li>
              <a href="https://www.service-public.fr/particuliers/vosdroits/F1028" target="_blank">Un justificatif de domicile r√©cent</a>
            </li>
          </ul>
          <p>
            D'autres justificatifs peuvent aider √† montrer le bien fond√© de votre demande, notamment :
          </p>
          <ul>
            <li>
              Des attestations de vos proches, ami¬∑es, coll√®gues, famille‚Ä¶ Avec chaque attestation, vous devez transmettre une copie recto-verso de la CNI ou du passeport de la personne qui l'a r√©dig√©e.
              <br>
              <RouterLink
                to="courriers/attestation-temoignage"
                class="button my-2"
              >
                G√©n√©rer vos attestations
              </RouterLink>
            </li>
            <li>Des factures, captures d'√©crans, courriers d'entreprises qui utilisent votre pr√©nom ou genre revendiqu√©.</li>
          </ul>
          <p>Ces justificatifs servent √† d√©montrer que votre genre et/ou pr√©nom(s) revendiqu√©s sont d√©j√† utilis√©s dans votre vie quotidienne.</p>
          <p>
            <strong>Il n'est pas n√©cessaire de fournir de justificatifs m√©dicaux</strong> pour obtenir gain de cause.
            D'autre part, nous vous recommandons de limiter au maximum le nombre de justificatifs et attestations que vous joignez
            √† votre demande. En effet, en fournissant de tr√®s nombreuses pi√®ces, on habitue les officiers d'√©tat-civil et magistrats
            √† des dossiers tr√®s fournis, ce qui complique d'autant plus la transition des personnes isol√©es ou pr√©caires
            qui ne sont pas en mesure de fournir de tels justificatifs.
          </p>
          <p>
            Deux ou trois attestations sont normalement largement suffisantes, et si ce n'est pas le cas, vous aurez l'opportunit√© d'en
            transmettre d'autres par la suite en compl√©tant votre dossier.
          </p>
        </StepDetails>
        <StepDetails stepId="prepareRequest" v-if="store.CecMethod === 'tribunal'">
          <h3>Pr√©parer votre demande</h3>
          <p>
            Vous allez maintenant produire le document de demande de changement de pr√©nom et de mention de sexe,
            √† adresser au tribunal administratif de votre ville de r√©sidence ou de naissance.
          </p>
          <RouterLink
            to="courriers/requete-changement-etat-civil-tribunal"
            class="button my-2"
          >
            G√©n√©rer votre demande de changement de pr√©nom et de mention de sexe
          </RouterLink>
        </StepDetails>
        <StepDetails stepId="prepareRequestName" v-if="store.CecMethod === 'mairieEtTribunal'">
          <h3>Pr√©parer votre demande de changement de pr√©nom</h3>
          <p>
            Vous allez maintenant produire le document de demande de changement de pr√©nom,
            √† adresser au service d'√©tat civil de la mairie de votre ville de r√©sidence ou de naissance.
          </p>
          
          <RouterLink
            to="courriers/changement-prenom-mairie"
            class="button my-2"
          >
            G√©n√©rer votre demande de changement de pr√©nom
          </RouterLink>
        </StepDetails>
        <StepDetails stepId="prepareRequestCourt" v-if="store.CecMethod === 'mairieEtTribunal'">
          <h3>Pr√©parer votre demande de changement de mention de sexe</h3>
          <p>
            Une fois que votre demande de changement de pr√©nom aura abouti
            et que vous aurez re√ßu la d√©cision du service d'√©tat-civil, 
            il vous faudra r√©diger une requ√™te de changement de mention de sexe,
            et l'adresser au tribunal administratif de votre ville de r√©sidence ou de naissance.
          </p>
          <p>
            Pour cette seconde demande, pensez √† joindre √† votre dossier la d√©cision de changement d√© pr√©nom fournie par le service d'√©tat-civil.
          </p>
          <RouterLink
            to="courriers/requete-changement-etat-civil-tribunal"
            class="button my-2"
          >
            G√©n√©rer votre demande de changement de mention de sexe
          </RouterLink>
        </StepDetails>
        
        <StepDetails stepId="submitRequest">
          <h3>D√©poser votre demande</h3>
          <p>
            Pour d√©poser votre demande, deux choix s'offrent √† vous :
          </p>
          <ul>
            <li>Une remise en main propre, directement au service d'√©tat-civil ou au tribunal.</li>
            <li>Un envoi par courrier, en recommand√©.</li>
          </ul>
          <p><strong>Le document de demande doit √™tre dat√© et sign√©.</strong></p>
          <p>
            Si vous d√©posez votre demande en main propre, demandez syst√©matiquement un re√ßu ou un document attestant du d√©p√¥t.
            Cela vous permettra de suivre l'avanc√©e de la proc√©dure, et de relancer si n√©cessaire.
          </p>
          <p>
            N'h√©sitez pas non plus √† demander quels sont les d√©lais habituels de traitement,
            cela vous permettra d'avoir une meilleure id√©e du temps que vous devrez patienter.
          </p>
        </StepDetails>
        <StepDetails stepId="wait">
          <h3>Attendre le r√©sultat de la proc√©dure</h3>
          <p>
            Votre demande est d√©pos√©e, maintenant vous n'avez plus qu'√† attendre.
          </p>
          <p>
            En mairie, les d√©lais vont g√©n√©ralement de quelques semaines √† trois ou quatre mois, mais cela d√©pend √©videmment de chaque commune.
          </p>
          <p>
            Au tribunal, les d√©lais sont plus long et le traitement d'une demande peut prendre entre six mois et deux ans.
            L√† encore, cela d√©pend de la commune et de la bonne volont√© des personnes qui traitent votre demande.
          </p>
          <p>
            Pour demande au tribunal, il n'est pas rare que vous receviez par courrier des demandes de documents compl√©mentaires.
            R√©pondez-y dans la mesure du possible soit par courrier, soit via une remise en main propre.
          </p>
          <p>
            Il pourra √©galement vous √™tre demand√© de vous rendre √† une audience sur place.
            Ce n'est pas syst√©matique mais cela arrive. Si tel est le cas, nous vous recommandons fortement d'y
            aller accompagn√©¬∑e et de prendre contact avec des associations locales pour en savoir plus
            sur l'attitude √† adopter : parfois il s'agit d'une simple formalit√©, parfois non.
          </p>
          <p>
            Il ne faut vraiment pas h√©siter √† appeler ponctuellement la mairie ou le tribunal
            pour savoir o√π en est votre demande. Il n'est pas rare que les courriers se perdent,
            et certaines personnes ont attendu plusieurs mois d'√™tre notifi√© d'une d√©cision
            qui avait d√©j√† √©t√© rendue.
          </p>
        </StepDetails>
        <StepDetails stepId="notification">
          <h3>Recevoir la notification de d√©cision</h3>
          <p>
            Une fois votre demande valid√©e, la mairie ou le tribunal vous enverront syst√©matiquement un courrier.
          </p>
          <p>
            <strong>Ce courrier contient la d√©cision ou le jugement et doit √™tre conserv√© pr√©cieusement,
            photocopi√© et/ou scann√©</strong>. Il peut notamment vous servir √† attester de votre identit√©
            en attendant d'avoir refait vos papiers, ou √† justifier de vos changements
            d'√©tat-civil pour d'autres d√©marches.
          </p>
          <p><strong>Chronologie</strong></p>
          <p>Au moment de la r√©ception du courrier, plusieurs choses se d√©clenchent automatiquement sans que vous ayez √† intervenir :</p>
          <ol>
            <li>Le service d'√©tat-civil ou le tribunal notifient votre commune de naissance du changement</li>
            <li>Votre commune de naissance mets √† jour votre acte de naissance</li>
            <li>L'INSEE est notifi√©e du changement</li>
            <li>L'INSEE informe diff√©rents organismes (imp√¥ts, CPAM, par exemple) du changement</li>
          </ol>
          <p>Les √©tapes 1 et 2 se font g√©n√©ralement sous deux √† trois mois, les √©tapes trois et quatre sous six mois.</p>
          <p>D√®s l'√©tape 2 r√©alis√©e, nous vous recommandons vivement de redemander plusieurs extraits d'actes de naissance aupr√®s de votre commune de naissance pour pouvoir refaire vos papiers d'identit√© et votre carte vitale.</p>
          <p>
            Parfois, l'INSEE ne fait pas automatiquement les √©tapes trois et quatre.
            Dans ce cas l√†, il faut <a href="https://www.service-public.fr/particuliers/vosdroits/R49454" target="blank">les contacter via un formulaire d√©di√©</a>.
          </p>
          <p><strong>S√©curit√© sociale</strong></p>
          <p>Lorsque la mention de changement de sexe est r√©percut√©e aupr√®s de la s√©curit√© sociale, plusieurs choses se produisent :</p>
          <ul>
            <li>Vous pouvez perdre acc√®s √† votre compte Ameli. C'est normal mais stressant car cela arrive sans pr√©venir. Il faut contacter Ameli par t√©l√©phone et leur expliquer la situation.</li>
            <li>Vous obtiendrez un nouveau num√©ro de s√©curit√© sociale. Le premier chiffre sera mis √† jour pour refl√©ter votre nouveau genre (1 pour les hommes, 2 pour les femmes)</li>
            <li>Vous devrez demander une nouvelle carte vitale</li>
          </ul>
          <p>
            <a href="https://wikitrans.co/2019/12/16/changement-de-numero-de-securite-sociale/">
              Wikitrans propose un article tr√®s complet sur cette question 
            </a>, vous y trouverez certainement les r√©ponses que vous cherchez.    
          </p>
        </StepDetails>
        <StepDetails stepId="party">
          <h3>üéâ C√©l√©brer üéâ</h3>
          <p>
            De tout c≈ìur, bravo !
          </p>
          <p>
            On est pass√©¬∑es par l√† aussi et on sait √†
            quel point tout le processus peut √™tre lent, usant, crevant, absurde et brutal.
          </p>
          <p>
            On vous souhaite du repos et de la s√©r√©nit√© apr√®s tout √ßa. N'h√©sitez pas √† nous √©crire
            si vous avez trouv√© Administrans utile, ou si vous souhaitez nous sugg√©rer des am√©liorations !
          </p>
        </StepDetails>
      </section>
    </div>
    <div class="grid--column one-third">
      <aside class="position--sticky my-4" id="checklist">
        <h2>Checklist</h2>
        <StepItem stepId="chooseCecMethod" :link="false">
          Choisir votre parcours :
          <select
            name="method"
            id="method"
            :value="store.CecMethod"
            @input="store.setCecMethod($event.target.value)">
            <option value="tribunal">Tribunal uniquement</option>
            <option value="mairieEtTribunal">Mairie puis tribunal</option>
          </select>
        </StepItem>
        <StepItem stepId="chooseNames" :link="true">
          Choisir vos pr√©noms
        </StepItem>
        <StepItem stepId="requestBirthCertificates">
          Demander des copies int√©grales de votre acte de naissance
        </StepItem>
        <template v-if="store.CecMethod === 'tribunal'">
          <StepItem stepId="prepareProofs">
            Rassembler vos justificatifs
          </StepItem>
          <StepItem stepId="prepareProofsBirthCertificate" class="mx-2" :link="false">
            Copie d'acte de naissance
          </StepItem>
          <StepItem stepId="prepareProofsId" class="mx-2" :link="false">
            Copie de votre CNI ou Passeport
          </StepItem>
          <StepItem stepId="prepareProofsHome" class="mx-2" :link="false">
            Justificatif de domicile
          </StepItem>
          <StepItem stepId="prepareProofsSocial" class="mx-2" :link="false">
            Attestations de proches
          </StepItem>
          <StepItem stepId="prepareRequest">
            Pr√©parer votre demande
          </StepItem>          
          <StepItem stepId="submitRequest">
            D√©poser o√π envoyer votre demande
          </StepItem>
          <StepItem stepId="wait">
            Attendre la d√©cision
          </StepItem>
          <StepItem stepId="notification">
            Recevoir la notification
          </StepItem>
          <StepItem stepId="party">
            C√©l√©brer
          </StepItem>
        </template>
        <template v-else>
          <StepItem stepId="submitRequestMairie" :link="false">
            Changement de pr√©nom en mairie
          </StepItem>
          <StepItem stepId="prepareProofs" class="mx-2">
            Rassembler vos justificatifs
          </StepItem>
          <StepItem stepId="prepareProofsBirthCertificateMairie" class="mx-4" :link="false">
            Copie d'acte de naissance
          </StepItem>
          <StepItem stepId="prepareProofsIdMairie" class="mx-4" :link="false">
            Copie de votre CNI ou Passeport
          </StepItem>
          <StepItem stepId="prepareProofsHomeMairie" class="mx-4" :link="false">
            Justificatif de domicile
          </StepItem>
          <StepItem stepId="prepareProofsSocialMairie" class="mx-4" :link="false">
            Attestations de proches
          </StepItem>


          <StepItem stepId="prepareRequestName" class="mx-2">
            Pr√©parer votre demande
          </StepItem>

          <StepItem stepId="submitRequestName" class="mx-2" linkTo="submitRequest">
            D√©poser votre demande
          </StepItem>
          <StepItem stepId="waitName" class="mx-2" linkTo="wait">
            Attendre la d√©cision
          </StepItem>
          
          <StepItem stepId="notificationName" class="mx-2" linkTo="notification">
            Recevoir la notification
          </StepItem>
          <StepItem stepId="party" class="mx-2">
            C√©l√©brer
          </StepItem>
  
          <StepItem stepId="submitRequestCourt" :link="false">
            Changement de mention de sexe au tribunal
          </StepItem>
          <StepItem stepId="prepareProofsCourt" class="mx-2" linkTo="prepareProofs">
            Rassembler vos justificatifs
          </StepItem>
          <StepItem stepId="prepareProofsBirthCertificateCourt" class="mx-4" :link="false">
            Copie d'acte de naissance
          </StepItem>
          <StepItem stepId="prepareProofsIdCourt" class="mx-4" :link="false">
            Copie de votre CNI ou Passeport
          </StepItem>
          <StepItem stepId="prepareProofsHomeCourt" class="mx-4" :link="false">
            Justificatif de domicile
          </StepItem>
          <StepItem stepId="prepareProofsSocialCourt" class="mx-4" :link="false">
            Attestations de proches
          </StepItem>
          <StepItem stepId="prepareProofsNameCHangeCourt" class="mx-4" :link="false">
            D√©cision de changement de pr√©nom transmise par l'√©tat-civil
          </StepItem>

          <StepItem stepId="prepareRequestCourt" class="mx-2">
            Pr√©parer votre demande
          </StepItem>

          <StepItem stepId="submitRequestCourt" class="mx-2" linkTo="submitRequest">
            D√©poser votre demande
          </StepItem>

          <StepItem stepId="waitCourt" class="mx-2" linkTo="wait">
            Attendre la d√©cision
          </StepItem>

          <StepItem stepId="notificationCourt" class="mx-2" linkTo="notification">
            Recevoir la notification
          </StepItem>
          <StepItem stepId="party" class="mx-2">
            C√©l√©brer
          </StepItem>
        </template>
        
      </aside>
      <RouterLink
        to="#checklist"
        class="button inverted desktop--hidden"
        style="position: fixed; right: var(--space-medium); bottom: var(--space-medium)"
      >
        Afficher la checklist
      </RouterLink>
    </div>
  </div>
</template>
